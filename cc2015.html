<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>Кредитная карта России — 2015</title>
<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
<script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
<script src="//code.jquery.com/jquery-1.12.0.min.js"></script>
<script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
<style>
  body { margin:0; padding:0; }
  #map { position:absolute; top:0; bottom:0; margin-left:20%; width:80%; }
  #words { position:absolute; top:0; bottom:0; margin:0; width:20%; }

</style>
</head>
<body>

<style>
  #header {
  	font-family:"Arial", "Helvetica", sans-serif;
  	position: absolute;
  	font-size: 22px;
    font-weight:bold;
  	z-index: 1000;
  	top: 10px;
  	color: #333;
  	text-align: left;
  	padding: 10px; 
  	background: rgba(255,255,255,0.8);
  }

    #header2 {
    font-family:"Arial", "Helvetica", sans-serif;
    font-weight:bold;
    position: absolute;
    font-size: 13px;
    z-index: 900;
    top:80px;
    color: #333;
    text-align: left;
    padding: 10px; 
    background: rgba(255,255,255,0.8);
  }

  .sou-ui {
    	font-family:"Arial", "Helvetica", sans-serif;
    	font-size:11px;
    color:#404040;
  position:absolute;
  bottom:10px;left:10px;
  z-index:1;
  }
  .sou-ui a {
  	text-decoration:none;
  }
  .sou-ui2 {
    font-family:"Arial", "Helvetica", sans-serif;
      font-size:11px;
    color:#404040;
  position:absolute;
  color: #333;
  top: 140px;
  padding: 10px; 
  z-index:1;
  }


</style>

<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;}
.tg td{font-family:Arial, Helvetica, sans-serif;font-size:14px;padding:5px 10px;border-style:dotted;border-width:1px;border-color: #ccc;overflow:hidden;word-break:normal;}
.tg th{font-family:Arial, Helvetica, sans-serif;font-size:14px;font-weight:normal;padding:5px 10px;border-style:dotted;border-width:1px;border-color: #ccc;overflow:hidden;word-break:normal;}
.tg .tg-gi3b{font-weight:bold;font-size:12px;background-color:#efefef;text-align:center}
.tg .tg-4dkb{font-weight:bold;font-size:12px;background-color:#f6dfd9;text-align:center}
.tg .tg-nll5{font-weight:bold;font-size:12px;background-color:#e1f3e3;text-align:center}
.tg .tg-j757{font-size:12px;background-color:#ffffff}
.tg .tg-ybcb{font-weight:bold;font-size:12px;background-color:#fcf4f2}
.tg .tg-jhro{font-weight:bold;font-size:12px;background-color:#f2f9f3}
</style>

<div id='words'>
<div id='header'>Кредитная карта России — 2015</div>
<nav id='sou-ui' class='sou-ui'>Крым и Севастополь не учтены в расчетах,</br>так как данных о них в Бюро недостаточно</br></br><a href="http://www.rbc.ru/" target="_blanc">© РБК, 2016<a>&nbsp;&nbsp;Источник: Объединенное кредитное бюро</nav>
<nav id='sou-ui2' class='sou-ui2'>
 <table class="tg" style="undefined;table-layout: auto">
  <tr>
    <th class="tg-gi3b">Параметр</th>
    <th class="tg-4dkb">Максимум</th>
    <th class="tg-nll5">Минимум</th>
  </tr>
  <tr>
    <td class="tg-j757">Средняя доля доходов заемщика, направляемых на погашение кредита, %</td>
    <td class="tg-ybcb">Карачаево-Черкесия: 74,5</td>
    <td class="tg-jhro">ХМАО: 18,9</td>
  </tr>
  <tr>
    <td class="tg-j757">Средняя сумма долга на одного заемщика, тыс. руб.</td>
    <td class="tg-ybcb">Чукотский АО: 583,9</td>
    <td class="tg-jhro">Марий Эл: 128</td>
  </tr>
  <tr>
    <td class="tg-j757">Количество активных заемщиков, тыс. чел.</td>
    <td class="tg-ybcb">Москва: 4631,2</td>
    <td class="tg-jhro">Чукотский АО: 9,6</td>
  </tr>
  <tr>
    <td class="tg-j757">Количество кредитов на одного заемщика, шт.</td>
    <td class="tg-ybcb">Алтай: 2,1</td>
    <td class="tg-jhro">Ингушетия: 1,2</td>
  </tr>
  <tr>
    <td class="tg-j757">Доля заемщиков от экономически активного населения, %</td>
    <td class="tg-ybcb">Алтай: 91,1</td>
    <td class="tg-jhro">Ингушетия: 15,6</td>
  </tr>
  <tr>
    <td class="tg-j757">Доля потенциальных банкротов от общего количества активных заемщиков региона, %</td>
    <td class="tg-ybcb">Карачаево-Черкесия: 3,2</td>
    <td class="tg-jhro">Ненецкий АО: 0,5</td>
  </tr>
  <tr>
    <td class="tg-j757">Доля просроченных кредитов на срок от 90 дней и более, %</td>
    <td class="tg-ybcb">Ингушетия: 35</td>
    <td class="tg-jhro">Чукотский АО: 5</td>
  </tr>
</table></nav>
<div id='header2'>Чтобы посмотреть разные параметры, выбирайте слои в правом верхнем углу карты</div>
</div>
<div id='map'></div>

<script>


    var map = L.map('map').setView([58,92], 3);


var stamenLayer = L.tileLayer('https://stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}.png', {
  attribution: 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>.'
}).addTo(map);

// create rectangle
L.rectangle([
  [-20000, -20000],
  [20000, 20000]], {stroke: false, fillColor: "#fff", fillOpacity: 0.5}
  ).addTo(map);
 
 var layers = document.getElementById('menu-ui');


var featureLayer2 = L.featureGroup()
L.featureGroup()
 $.getJSON( "data_all.geojson", function( data ) {

  data.features.forEach(function(f)  {

  })

L.geoJson(data, {
  pointToLayer: function(feature, latlng) {

    return L.circleMarker(latlng, {

    radius: Math.sqrt(feature.properties.Dol_d_dot),
          fillColor: "#d40028",
          stroke: false,
          fillOpacity: 0.8});

    },
    onEachFeature: function (feature, layer) {
        layer.bindPopup('<b><h3>' + feature.properties.name + '</h3></b><b>Средняя доля доходов заемщика, направляемых на погашение кредита: ' + feature.properties.Dol_d + ' %</b></br></br>Средняя сумма долга на одного заемщика: <b>' + feature.properties.Sum_d + ' тыс. руб.</b></br>Количество активных заемщиков: <b>' + feature.properties.Akt_z + ' тыс. чел.</b></br>Количество кредитов на одного заемщика: <b>' + feature.properties.Cred_one + ' шт.</b></br>Доля заемщиков от экономически активного населения: <b>' + feature.properties.Dol_z + ' %</b></br>Доля потенциальных банкротов от общего количества активных заемщиков региона: <b>' + feature.properties.Dol_b + ' %</b></br>Доля просроченных кредитов на срок от 90 дней и более: <b>' + feature.properties.Dol_pr_cr+ ' %</b></br></br> ');
    }
}).addTo(featureLayer2);
  
});


var featureLayer3 = L.featureGroup()
L.featureGroup()
 $.getJSON( "data_all.geojson", function( data ) {

  data.features.forEach(function(f)  {

  })

L.geoJson(data, {
  pointToLayer: function(feature, latlng) {

    return L.circleMarker(latlng, {

    radius: Math.sqrt(feature.properties.Cred_one_dot)*5,
          fillColor: "#fd6400",
          stroke:  false,
          fillOpacity: 0.7});

    },
    onEachFeature: function (feature, layer) {
        layer.bindPopup('<b><h3>' + feature.properties.name + '</h3></b>Средняя доля доходов заемщика, направляемых на погашение кредита: <b>' + feature.properties.Dol_d + ' %</b></br>Средняя сумма долга на одного заемщика: <b>' + feature.properties.Sum_d + ' тыс. руб.</b></br>Количество активных заемщиков: <b>' + feature.properties.Akt_z + ' тыс. чел.</b></br></br><b>Количество кредитов на одного заемщика: ' + feature.properties.Cred_one + ' шт.</b></br></br>Доля заемщиков от экономически активного населения: <b>' + feature.properties.Dol_z + ' %</b></br>Доля потенциальных банкротов от общего количества активных заемщиков региона: <b>' + feature.properties.Dol_b + ' %</b></br>Доля просроченных кредитов на срок от 90 дней и более: <b>' + feature.properties.Dol_pr_cr+ ' %</b></br></br> ');
    }
}).addTo(featureLayer3);

});

var featureLayer4 = L.featureGroup()
L.featureGroup()
 $.getJSON( "data_all.geojson", function( data ) {

  data.features.forEach(function(f)  {

  })

L.geoJson(data, {
  pointToLayer: function(feature, latlng) {

    return L.circleMarker(latlng, {

    radius: Math.sqrt(feature.properties.Sum_d_dot)/2.4,
          fillColor: "#fda700",
          stroke:  false,
          fillOpacity: 0.7});

    },
    onEachFeature: function (feature, layer) {
        layer.bindPopup('<b><h3>' + feature.properties.name + '</h3></b>Средняя доля доходов заемщика, направляемых на погашение кредита: <b>' + feature.properties.Dol_d + ' %</b></br></br><b>Средняя сумма долга на одного заемщика: ' + feature.properties.Sum_d + ' тыс. руб.</b></br></br>Количество активных заемщиков: <b>' + feature.properties.Akt_z + ' тыс. чел.</b></br>Количество кредитов на одного заемщика: <b>' + feature.properties.Cred_one + ' шт.</b></br>Доля заемщиков от экономически активного населения: <b>' + feature.properties.Dol_z + ' %</b></br>Доля потенциальных банкротов от общего количества активных заемщиков региона: <b>' + feature.properties.Dol_b + ' %</b></br>Доля просроченных кредитов на срок от 90 дней и более: <b>' + feature.properties.Dol_pr_cr+ ' %</b></br></br> ');
    }
}).addTo(featureLayer4);

});

var featureLayer5 = L.featureGroup()
L.featureGroup()
 $.getJSON( "data_all.geojson", function( data ) {

  data.features.forEach(function(f)  {

  })

L.geoJson(data, {
  pointToLayer: function(feature, latlng) {

    return L.circleMarker(latlng, {

    radius: Math.sqrt(feature.properties.Akt_z_dot)/3,
          fillColor: "#0089fd",
          stroke:  false,
          fillOpacity: 0.7});

    },
    onEachFeature: function (feature, layer) {
        layer.bindPopup('<b><h3>' + feature.properties.name + '</h3></b>Средняя доля доходов заемщика, направляемых на погашение кредита: <b>' + feature.properties.Dol_d + ' %</b></br>Средняя сумма долга на одного заемщика: <b>' + feature.properties.Sum_d + ' тыс. руб.</b></br></br><b>Количество активных заемщиков: ' + feature.properties.Akt_z + ' тыс. чел.</b></br></br>Количество кредитов на одного заемщика: <b>' + feature.properties.Cred_one + ' шт.</b></br>Доля заемщиков от экономически активного населения: <b>' + feature.properties.Dol_z + ' %</b></br>Доля потенциальных банкротов от общего количества активных заемщиков региона: <b>' + feature.properties.Dol_b + ' %</b></br>Доля просроченных кредитов на срок от 90 дней и более: <b>' + feature.properties.Dol_pr_cr+ ' %</b></br></br> ');
    }
}).addTo(featureLayer5);


});

var featureLayer6 = L.featureGroup()
L.featureGroup()
 $.getJSON( "data_all.geojson", function( data ) {

  data.features.forEach(function(f)  {

  })

L.geoJson(data, {
  pointToLayer: function(feature, latlng) {

    return L.circleMarker(latlng, {

    radius: Math.sqrt(feature.properties.Dol_z_dot),
          fillColor: "#00d0fd",
          stroke:  false,
          fillOpacity: 0.7});

    },
    onEachFeature: function (feature, layer) {
        layer.bindPopup('<b><h3>' + feature.properties.name + '</h3></b>Средняя доля доходов заемщика, направляемых на погашение кредита: <b>' + feature.properties.Dol_d + ' %</b></br>Средняя сумма долга на одного заемщика: <b>' + feature.properties.Sum_d + ' тыс. руб.</b></br>Количество активных заемщиков: <b>' + feature.properties.Akt_z + ' тыс. чел.</b></br>Количество кредитов на одного заемщика: <b>' + feature.properties.Cred_one + ' шт.</b></br></br><b>Доля заемщиков от экономически активного населения: ' + feature.properties.Dol_z + ' %</b></br></br>Доля потенциальных банкротов от общего количества активных заемщиков региона: <b>' + feature.properties.Dol_b + ' %</b></br>Доля просроченных кредитов на срок от 90 дней и более: <b>' + feature.properties.Dol_pr_cr+ ' %</b></br></br> ');
    }
}).addTo(featureLayer6);


});

var featureLayer7 = L.featureGroup()
L.featureGroup()
 $.getJSON( "data_all.geojson", function( data ) {

  data.features.forEach(function(f)  {

  })

L.geoJson(data, {
  pointToLayer: function(feature, latlng) {

    return L.circleMarker(latlng, {

    radius: Math.sqrt(feature.properties.Dol_b_dot)*5,
          fillColor: "#82000c",
          stroke: false,
          fillOpacity: 0.7});

    },
    onEachFeature: function (feature, layer) {
        layer.bindPopup('<b><h3>' + feature.properties.name + '</h3></b>Средняя доля доходов заемщика, направляемых на погашение кредита: <b>' + feature.properties.Dol_d + ' %</b></br>Средняя сумма долга на одного заемщика: <b>' + feature.properties.Sum_d + ' тыс. руб.</b></br>Количество активных заемщиков: <b>' + feature.properties.Akt_z + ' тыс. чел.</b></br>Количество кредитов на одного заемщика: <b>' + feature.properties.Cred_one + ' шт.</b></br>Доля заемщиков от экономически активного населения: <b>' + feature.properties.Dol_z + ' %</b></br></br><b>Доля потенциальных банкротов от общего количества активных заемщиков региона: ' + feature.properties.Dol_b + ' %</b></br></br>Доля просроченных кредитов на срок от 90 дней и более: <b>' + feature.properties.Dol_pr_cr+ ' %</b></br></br> ');
    }
}).addTo(featureLayer7);

});

var featureLayer8 = L.featureGroup()
L.featureGroup()
 $.getJSON( "data_all.geojson", function( data ) {

  data.features.forEach(function(f)  {

  })

L.geoJson(data, {
  pointToLayer: function(feature, latlng) {

    return L.circleMarker(latlng, {

    radius: Math.sqrt(feature.properties.Dol_pr_cr_dot)*1.5,
          fillColor: "#000",
          stroke: false,
          fillOpacity: 0.8});

    },
    onEachFeature: function (feature, layer) {
        layer.bindPopup('<b><h3>' + feature.properties.name + '</h3></b>Средняя доля доходов заемщика, направляемых на погашение кредита: <b>' + feature.properties.Dol_d + ' %</b></br>Средняя сумма долга на одного заемщика: <b>' + feature.properties.Sum_d + ' тыс. руб.</b></br>Количество активных заемщиков: <b>' + feature.properties.Akt_z + ' тыс. чел.</b></br>Количество кредитов на одного заемщика: <b>' + feature.properties.Cred_one + ' шт.</b></br>Доля заемщиков от экономически активного населения: <b>' + feature.properties.Dol_z + ' %</b></br>Доля потенциальных банкротов от общего количества активных заемщиков региона: <b>' + feature.properties.Dol_b + ' %</b></br></br><b>Доля просроченных кредитов на срок от 90 дней и более: ' + feature.properties.Dol_pr_cr+ ' %</b></br></br> ');
    }
}).addTo(featureLayer8);

  
});

featureLayer2.addTo(map);


      var dodo   = featureLayer2,
        kcr = featureLayer3,
        summa  = featureLayer4,
        activ = featureLayer5,
        econ = featureLayer6,
        ban = featureLayer7,
        prosr = featureLayer8;

    var baseLayers = {
      "Средняя доля доходов заемщика, направляемых на погашение кредита, %": dodo,
      "Средняя сумма долга на одного заемщика, тыс. руб.": summa,
      "Количество активных заемщиков, тыс. чел.": activ,
      "Количество кредитов на одного заемщика, шт.": kcr,
      "Доля заемщиков от экономически активного населения, %": econ,
      "Доля потенциальных банкротов от общего количества активных заемщиков региона, %": ban,
      "Доля просроченных кредитов на срок от 90 дней и более, %": prosr
    };

L.control.layers(baseLayers).addTo(map);




</script>
</body>
</html>
